language: generic
matrix:
  include:
    - os: linux
      sudo: false
    - os: osx
install:
  # Install acceptance test dependencies for OSX
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then brew update; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then which gsed || brew install gnu-sed; fi
  - if [ "$TRAVIS_OS_NAME" = "osx" ]; then which gtimeout || brew install coreutils; fi
  # Show versions used
  - bash --version
  - awk --version
script: test/acceptance.sh
# Travis docs: Note that pull request builds skip deployment step altogether.
# https://docs.travis-ci.com/user/deployment/#Conditional-Releases-with-on
deploy:
  skip_cleanup: true
  provider: script
  script: website/_bin/travis-deploy.sh
  on:
    branch: master
